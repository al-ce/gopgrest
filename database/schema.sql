CREATE TABLE IF NOT EXISTS authors (
    -- consider using serial for smaller size
    id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    surname varchar(50) NOT NULL,
    forename varchar(50) NOT NULL DEFAULT '', -- for mononyms e.g. Plato
    born smallint,
    died smallint
);

CREATE TABLE IF NOT EXISTS genres (
    id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name varchar(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS books (
    id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    title varchar(50) NOT NULL,
    author_id integer NOT NULL REFERENCES authors ON DELETE CASCADE,
    genre_id integer REFERENCES genres
);

INSERT INTO authors (surname, forename, born, died)
VALUES
('Carson', 'Anne', '1950', null),
('BrontÃ«', 'Anne', '1820', '1849'),
('Woolf', 'Virginia', '1882', '1941');


INSERT INTO genres (name)
VALUES
('Modernism'),
('Epistolary'),
('Romance'),
('Dystopian');

INSERT INTO books (title, author_id, genre_id)
VALUES
('Autobiography of Red', '1', '3'),
('The Tenant of Wildfell Hall', '2', '2'),
('To The Lighthouse', '3', '1'),
('Mrs. Dalloway', '3', null);
